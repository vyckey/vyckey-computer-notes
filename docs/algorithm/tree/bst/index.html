<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-algorithm/tree/bst" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">BST, AVL, RBT | Vyckey Computer Notes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="http://hoily.site/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="http://hoily.site/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="http://hoily.site/docs/algorithm/tree/bst"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="BST, AVL, RBT | Vyckey Computer Notes"><meta data-rh="true" name="description" content="BST 二叉查找树"><meta data-rh="true" property="og:description" content="BST 二叉查找树"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://hoily.site/docs/algorithm/tree/bst"><link data-rh="true" rel="alternate" href="http://hoily.site/docs/algorithm/tree/bst" hreflang="en"><link data-rh="true" rel="alternate" href="http://hoily.site/docs/algorithm/tree/bst" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Vyckey Computer Notes RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Vyckey Computer Notes Atom Feed"><link rel="stylesheet" href="/assets/css/styles.500dd4b8.css">
<script src="/assets/js/runtime~main.57421d11.js" defer="defer"></script>
<script src="/assets/js/main.6affa15a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.jpeg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.jpeg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Vyckey Notes</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Computer</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/database">Database</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/database/mysql">MySQL</a></li><li><a class="dropdown__link" href="/database/redis">Redis</a></li><li><a class="dropdown__link" href="/database/elasticsearch">ES</a></li></ul></div><a class="navbar__item navbar__link" href="/java">Java</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/middleware">Middleware</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/middleware/rpc/dubbo">Dubbo</a></li><li><a class="dropdown__link" href="/middleware/mq/kafka">Kafka</a></li></ul></div><a class="navbar__item navbar__link" href="/bigdata">Bigdata</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/ai">AI</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ai/deeplearning/transformer">Transformer</a></li><li><a class="dropdown__link" href="/ai/deeplearning/models">Models</a></li></ul></div><a class="navbar__item navbar__link" href="/frontend">Frontend</a><a class="navbar__item navbar__link" href="/material">Material</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/vyckey/vyckey-computer-notes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/algorithm/">Algoritm</a><button aria-label="Collapse sidebar category &#x27;Algoritm&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/algorithm/complexity">Algorithm Complexity</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/algorithm/tree/">Tree Algorithm</a><button aria-label="Collapse sidebar category &#x27;Tree Algorithm&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/algorithm/tree/heap">Heap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/algorithm/tree/bst">BST, AVL, RBT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/algorithm/tree/segment_tree">Segment Tree</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/algorithm/tree/union_find">Union Find</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/algorithm/graph/">Graph Algoritm</a><button aria-label="Expand sidebar category &#x27;Graph Algoritm&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/algorithm/skip-list">Skip-List</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/algorithm/random">Random</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/algorithm/sort">Sort</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/algorithm/problems/">Problems</a><button aria-label="Expand sidebar category &#x27;Problems&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/algorithm/diff_arr">Diff Array</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/algorithm/string/kmp">string</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/architecture/">Architecture</a><button aria-label="Expand sidebar category &#x27;Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/paradigm/">Programming Paradigm</a><button aria-label="Expand sidebar category &#x27;Programming Paradigm&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/network/">Network</a><button aria-label="Expand sidebar category &#x27;Network&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/tools/">Tools</a><button aria-label="Expand sidebar category &#x27;Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/algorithm/"><span itemprop="name">Algoritm</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/algorithm/tree/"><span itemprop="name">Tree Algorithm</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">BST, AVL, RBT</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>BST, AVL, RBT</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bst-二叉查找树">BST 二叉查找树<a href="#bst-二叉查找树" class="hash-link" aria-label="Direct link to BST 二叉查找树" title="Direct link to BST 二叉查找树">​</a></h2>
<p>二叉查找树（BST）具备以下特性：</p>
<ol>
<li>左子树上所有结点的值均小于或等于它的根结点的值。</li>
<li>右子树上所有结点的值均大于或等于它的根结点的值。</li>
<li>左、右子树也分别为二叉排序树。</li>
</ol>
<p>二叉查找树（BST）的理想性能是 <code>O(log N)</code> 的时间复杂度，极端情况下，会退化成链表，查找时间复杂度降为 <code>O(N)</code> 。为了避免极端情况发生，发展出了平衡二叉树（AVL）和红黑树（red-black tree），它们的时间复杂度都严格为 <code>O(log N)</code> 。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="avl-二叉平衡树">AVL 二叉平衡树<a href="#avl-二叉平衡树" class="hash-link" aria-label="Direct link to AVL 二叉平衡树" title="Direct link to AVL 二叉平衡树">​</a></h2>
<p>二叉平衡树（AVL）具备以下特性：</p>
<ol>
<li>它是一棵二叉查找树（BST）。</li>
<li>每个节点的左右子节点的高度之差的绝对值最多为1。</li>
</ol>
<p>在插入、删除树节点的时候，如果破坏了以上的特性，AVL树会通过旋转进行调整，再次使得以上特性成立。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="avl-子树失衡的调整">AVL 子树失衡的调整<a href="#avl-子树失衡的调整" class="hash-link" aria-label="Direct link to AVL 子树失衡的调整" title="Direct link to AVL 子树失衡的调整">​</a></h3>
<p>AVL 子树失衡存在四种场景，可以通过对不平衡支点（pivot）左旋或右旋的方式进行调整：</p>
<ol>
<li>左左结构失衡：右旋</li>
<li>右右结构失衡：左旋</li>
<li>左右结构失衡：左旋+右旋</li>
<li>右左结构失衡：右旋+左旋</li>
</ol>
<p><img decoding="async" loading="lazy" src="/assets/images/avl_balance-b9720b86b8e90ec4ebc21414f2b043dd.png" width="800" height="566" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="avl-节点删除">AVL 节点删除<a href="#avl-节点删除" class="hash-link" aria-label="Direct link to AVL 节点删除" title="Direct link to AVL 节点删除">​</a></h3>
<ul>
<li>当被删除节点为<strong>叶子节点</strong>时，直接删除，然后判断其父节点到根节点是否有失衡情况，有则通过旋转方式调整。</li>
<li>当被删除节点为<strong>非叶子节点，且仅有左子树或者右子树</strong>时，用左子树或右子树替代原来的位置，然后判断是否失衡，有则失衡调整。</li>
<li>当被删除节点为<strong>非叶子节点，且有左子树和右子树</strong>时，找到被删除节点值的前驱或者后驱节点替代原来的位置，然后判断 是否失衡，有则失衡调整。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="rbt-红黑树">RBT 红黑树<a href="#rbt-红黑树" class="hash-link" aria-label="Direct link to RBT 红黑树" title="Direct link to RBT 红黑树">​</a></h2>
<p>二叉平衡树（AVL）插入的时候很容易出现不平衡的情况，需要对失衡情况进行调整，操作过于频繁。红黑树（RBT）继承了AVL可自平衡的优点，同时在查询速率和平衡调整中寻找折中点，放宽了树的平衡条件，从而可以用于 <strong>频繁增加或删除节点</strong> 的场景。因此，AVL树更适用于<strong>修改较少查询较多</strong>的场景。</p>
<p><img decoding="async" loading="lazy" alt="一棵红黑树图例" src="/assets/images/rbt_example-802311f9707c2a00baaadc8d626defb8.png" width="900" height="441" class="img_ev3q"></p>
<p>红黑树（RBT）除了是一棵二叉查找树（BST）外，还具备以下特性：</p>
<ol>
<li>节点是<font color="red"><strong>红色</strong></font>或<font color="black"><strong>黑色</strong></font>。</li>
<li>根节点是<font color="black"><strong>黑色</strong></font>。</li>
<li>所有叶子节点都是<font color="black"><strong>黑色</strong></font>的空（NIL）节点。</li>
<li>每个<font color="red"><strong>红色</strong></font>节点的两个子节点都是<font color="black"><strong>黑色</strong></font>（从每个叶子到根的所有路径上不能有两个连续的<font color="red"><strong>红色</strong></font>节点）（或者说不存在两个相邻的<font color="red"><strong>红色</strong></font>节点，相邻指两个节点是父子关系）（或者说<font color="red"><strong>红色</strong></font>节点的父节点和子节点均是<font color="black"><strong>黑色</strong></font>的）。</li>
<li>从任一节点到其每个叶子的所有简单路径都包含相同数目的<font color="black"><strong>黑色</strong></font>节点。</li>
</ol>
<p>红黑树并不是一颗<strong>AVL平衡二叉搜索树</strong>，从下图可以看到，节点13的左子树显然比右子树高。</p>
<p><img decoding="async" loading="lazy" alt="一棵红黑树图例" src="/assets/images/rbt_example2-aff87ae28d9a9abb7bab807287adea99.awebp" width="860" height="595" class="img_ev3q"></p>
<p>在红黑树上进行插入操作和删除操作会导致不再符合红黑树的性质。恢复红黑树的性质需要少量 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">n</span></span><span class="mclose">)</span></span></span></span> 的颜色变更（实际是非常快速的）和不超过三次树旋转（对于插入操作是两次）。虽然插入和删除很复杂，但操作时间仍可以保持为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\log{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02778em">O</span><span class="mopen">(</span><span class="mop">lo<span style="margin-right:0.01389em">g</span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal">n</span></span><span class="mclose">)</span></span></span></span> 次。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="失衡处理操作">失衡处理操作<a href="#失衡处理操作" class="hash-link" aria-label="Direct link to 失衡处理操作" title="Direct link to 失衡处理操作">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="变色">变色<a href="#变色" class="hash-link" aria-label="Direct link to 变色" title="Direct link to 变色">​</a></h4>
<p>为了满足红黑树的特性，节点的颜色由红变<font color="black"><strong>黑</strong></font>或由黑变<font color="red"><strong>红</strong></font>。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="左旋右旋">左旋/右旋<a href="#左旋右旋" class="hash-link" aria-label="Direct link to 左旋/右旋" title="Direct link to 左旋/右旋">​</a></h4>
<p>同AVL树一样，红黑树</p>
<p><img decoding="async" loading="lazy" alt="RBT的左旋和右旋操作" src="/assets/images/rbt_left_right_rotate-6c6e0a8fc613f9921dcd627334796795.png" width="720" height="446" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="节点插入场景分析">节点插入场景分析<a href="#节点插入场景分析" class="hash-link" aria-label="Direct link to 节点插入场景分析" title="Direct link to 节点插入场景分析">​</a></h3>
<p>在 Java 中的 <code>HashMap</code> 用到了红黑树，其数据结构定义如下：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">implements</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">Entry</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> hash</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">K</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token class-name">V</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">volatile</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">TreeNode</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">TreeNode</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> parent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">TreeNode</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> left</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">TreeNode</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> right</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">TreeNode</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> prev</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">boolean</span><span class="token plain"> red</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">TreeNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> hash</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">K</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">V</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Node</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             </span><span class="token class-name">TreeNode</span><span class="token generics punctuation" style="color:#393A34">&lt;</span><span class="token generics class-name">K</span><span class="token generics punctuation" style="color:#393A34">,</span><span class="token generics class-name">V</span><span class="token generics punctuation" style="color:#393A34">&gt;</span><span class="token plain"> parent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">hash</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">parent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景1-空树无任何节点">场景1 空树无任何节点<a href="#场景1-空树无任何节点" class="hash-link" aria-label="Direct link to 场景1 空树无任何节点" title="Direct link to 场景1 空树无任何节点">​</a></h4>
<p>插入根节点，并标记为黑色。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景2-插入节点的父节点为黑色">场景2 插入节点的父节点为黑色<a href="#场景2-插入节点的父节点为黑色" class="hash-link" aria-label="Direct link to 场景2 插入节点的父节点为黑色" title="Direct link to 场景2 插入节点的父节点为黑色">​</a></h4>
<p>由于插入的节点是红色的，当插入节点的父节点是黑色时，不会影响红黑树的性质，直接插入无需做自平衡。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景3-插入节点的父节点为红色">场景3 插入节点的父节点为红色<a href="#场景3-插入节点的父节点为红色" class="hash-link" aria-label="Direct link to 场景3 插入节点的父节点为红色" title="Direct link to 场景3 插入节点的父节点为红色">​</a></h4>
<p>根据性质2，根节点是黑色。如果插入节点的父节点为红色节点，那么该<strong>父节点不可能为根节点</strong>，所以插入节点总是存在祖父节点(三代关系)。</p>
<p>根据性质4，每个红色节点的两个子节点一定是黑色的。不能有两个红色节点相连。那么只能出现两种情况：</p>
<ol>
<li>父亲节点和叔父节点都为红色。</li>
<li>父亲节点为红色，叔父节点为黑色。</li>
</ol>
<p>接下来我们对两种情况分开讨论。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景31-父亲和叔父节点都为红色">场景3.1 父亲和叔父节点都为红色<a href="#场景31-父亲和叔父节点都为红色" class="hash-link" aria-label="Direct link to 场景3.1 父亲和叔父节点都为红色" title="Direct link to 场景3.1 父亲和叔父节点都为红色">​</a></h4>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="300" height="139" class="img_ev3q"></p>
<p>根据性质4，红色节点不能相连，我们可以得出祖父节点G肯定为黑色节点。父亲P为红色，那么此时该插入子树的红黑树层数的颜色是黑红红，违背性质4。</p>
<p>所以我们需要变色，调整为红黑红，即祖父节点G变为红色，父亲节点P和叔父节点U变为黑色。</p>
<p>接下来我们把祖父节点G当做新节点处理。因为祖父节点G颜色变为了红色，如果G的父节点为红色，可能违背性质2或性质4，需要做自平衡操作恢复红黑树的性质。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景32-父亲节点为红色叔父节点为黑色">场景3.2 父亲节点为红色，叔父节点为黑色<a href="#场景32-父亲节点为红色叔父节点为黑色" class="hash-link" aria-label="Direct link to 场景3.2 父亲节点为红色，叔父节点为黑色" title="Direct link to 场景3.2 父亲节点为红色，叔父节点为黑色">​</a></h4>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景321-父亲节点为红色叔父节点为黑色ll型失衡">场景3.2.1 父亲节点为红色，叔父节点为黑色（LL型失衡）<a href="#场景321-父亲节点为红色叔父节点为黑色ll型失衡" class="hash-link" aria-label="Direct link to 场景3.2.1 父亲节点为红色，叔父节点为黑色（LL型失衡）" title="Direct link to 场景3.2.1 父亲节点为红色，叔父节点为黑色（LL型失衡）">​</a></h4>
<p>描述：父节点P是红色而叔父节点U是黑色或缺少，新节点N是其父节点的左子节点，而父节点P又是其父节点G的左子节点。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/rbt_insert_case_3.2.ll-e1f405d51a96664d30056c16857373d4.png" width="310" height="138" class="img_ev3q"></p>
<ol>
<li>变色：父节点P变为黑色，祖父节点G变为红色。</li>
<li>右旋：对节点P进行右旋操作。</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场  景322-父亲节点为红色叔父节点为黑色lr型失衡">场景3.2.2 父亲节点为红色，叔父节点为黑色（LR型失衡）<a href="#场景322-父亲节点为红色叔父节点为黑色lr型失衡" class="hash-link" aria-label="Direct link to 场景3.2.2 父亲节点为红色，叔父节点为黑色（LR型失衡）" title="Direct link to 场景3.2.2 父亲节点为红色，叔父节点为黑色（LR型失衡）">​</a></h4>
<p>描述：父节点P是红色而叔父节点U是黑色或缺少，并且新节点N是其父节点P的右子节点而父节点P又是其父节点的左子节点。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/rbt_insert_case_3.2.lr-c8aa2048961a4ad44c40bf9961ba7d12.png" width="283" height="138" class="img_ev3q"></p>
<p>我们先进行一次左旋调换新节点N和其父节点P，然后就得到<strong>场景3.2.1</strong>的情况，再进行一次变色和右旋操作就能完成平衡操作。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景323-父亲节点为红色叔父节点为黑色rr型失衡">场景3.2.3 父亲节点为红色，叔父节点为黑色（RR型失衡）<a href="#场景323-父亲节点为红色叔父节点为黑色rr型失衡" class="hash-link" aria-label="Direct link to 场景3.2.3 父亲节点为红色，叔父节点为黑色（RR型失衡）" title="Direct link to 场景3.2.3 父亲节点为红色，叔父节点为黑色（RR型失衡）">​</a></h4>
<p>描述：父节点P是红色而叔父节点U是黑色或缺少，新节点N是其父节点的右子节点，而父节点P又是其父节点G的右子节点。（<strong>LL型镜像情况</strong>）</p>
<ol>
<li>变色：父节点P变为黑色，祖父节点G变为红色。</li>
<li>左旋：对节点P进行左旋操作。</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景324-父亲节点为红色叔父节点为黑色rl型失衡">场景3.2.4 父亲节点为红色，叔父节点为黑色（RL型失衡）<a href="#场景324-父亲节点为红色叔父节点为黑色rl型失衡" class="hash-link" aria-label="Direct link to 场景3.2.4 父亲节点为红色，叔父节点为黑色（RL型失衡）" title="Direct link to 场景3.2.4 父亲节点为红色，叔父节点为黑色（RL型失衡）">​</a></h4>
<p>描述：父节点P是红色而叔父节点U是黑色或缺少，并且新节点N是其父节点P的右子节点而父节点P又是其父节点的左子节点。（<strong>LR型镜像情况</strong>）</p>
<p>我们先进行一次右旋调换新节点N和其父节点P，然后就得到<strong>场景3.2.3</strong>的情况，再进行一次变色和左旋操作就能完成平衡操作。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="节点删除场景分析">节点删除场景分析<a href="#节点删除场景分析" class="hash-link" aria-label="Direct link to 节点删除场景分析" title="Direct link to 节点删除场景分析">​</a></h3>
<ol>
<li>待删除节点<strong>有2个孩子</strong>节点<!-- -->
<ul>
<li>删除该节点，使用前驱或后驱节点替换，循环往复，一定会出现新要删除的节点<strong>少于2个孩子</strong>节点的情况</li>
</ul>
</li>
<li>待删除节点<strong>有1个孩子</strong>节点<!-- -->
<ol>
<li>待删除节点是红色<!-- -->
<ul>
<li>其父亲和孩子节点一定是黑色，使用黑色孩子节点替换待删除节点</li>
</ul>
</li>
<li>待删除节点是黑色<!-- -->
<ol>
<li>待删除节点的孩子节点是红色<!-- -->
<ul>
<li>使用黑色孩子节点替换待删除节点，并修改颜色为红色</li>
</ul>
</li>
<li>待删除节点的孩子节点是黑色<!-- -->
<ul>
<li>情况最为复杂，下面分场景讨论</li>
</ul>
</li>
</ol>
</li>
</ol>
</li>
<li>待删除节点<strong>无孩子</strong>节点（叶子节点）</li>
</ol>
<ul>
<li>我们可以把任意一个NIL节点看做孩子节点，问题转换为待删除节点<strong>有1个孩子</strong>节点</li>
</ul>
<p>以下情况的大前提是待删除的节点仅有1个孩子节点，且其颜色和孩子  节点的颜色都是黑色。黑色孩子节点将替换待删除节点，我们称这个节点为N，其兄弟节点为S，其父节点为P，S_L和S_R为S的左右孩子节点。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景1-n成为新的根">场景1 N成为新的根<a href="#场景1-n成为新的根" class="hash-link" aria-label="Direct link to 场景1 N成为新的根" title="Direct link to 场景1 N成为新的根">​</a></h4>
<p>很完美，所有性质都满足。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景2-s是红色节点">场景2 S是红色节点<a href="#场景2-s是红色节点" class="hash-link" aria-label="Direct link to 场景2 S是红色节点" title="Direct link to 场景2 S是红色节点">​</a></h4>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="298" height="136" class="img_ev3q"></p>
<p>我们对N的父节点P做左旋操作，然后对调P和S的颜色。现在N有了一个黑色的兄弟和一个红色的父亲，我们再通过场景4、场景5或场景6进行处理。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景3-n的父亲s和s孩子节点都是黑色">场景3 N的父亲、S和S孩子节点都是黑色<a href="#场景3-n的父亲s和s孩子节点都是黑色" class="hash-link" aria-label="Direct link to 场景3 N的父亲、S和S孩子节点都是黑色" title="Direct link to 场景3 N的父亲、S和S孩子节点都是黑色">​</a></h4>
<p><img decoding="async" loading="lazy" src="/assets/images/rbt_delete_case_4.3-28a2e049792557e7b342f164b6d43715.png" width="313" height="132" class="img_ev3q"></p>
<p>我们重绘S为红色，此时通过S的所有路径都少了一个黑色节点，而N的路径正好被删了一个黑色节点，所以P下两边黑色节点数保持相同。但是经过P的路径少了一个黑色节点，会引起新的不平衡，接下来，我们从P开始，判断具体场景进行操作。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景4-s和s孩子节点都是黑色但父节点是红色">场景4 S和S孩子节点都是黑色，但父节点是红色<a href="#场景4-s和s孩子节点都是黑色但父节点是红色" class="hash-link" aria-label="Direct link to 场景4 S和S孩子节点都是黑色，但父节点是红色" title="Direct link to 场景4 S和S孩子节点都是黑色，但父节点是红色">​</a></h4>
<p><img decoding="async" loading="lazy" src="/assets/images/rbt_delete_case_4.4-5ed52c9bb5eabf424ba168b90a76b812.png" width="313" height="132" class="img_ev3q"></p>
<p>交换S和P节点的颜色，完美满足性质5。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景5-s是黑色s的左儿子是红色s的右儿子是黑色而n是它父亲的左儿子">场景5 S是黑色，S的左儿子是红色，S的右儿子是黑色，而N是它父亲的左儿子<a href="#场景5-s是黑色s的左儿子是红色s的右儿子是黑色而n是它父亲的左儿子" class="hash-link" aria-label="Direct link to 场景5 S是黑色，S的左儿子是红色，S的右儿子是黑色，而N是它父亲的左儿子" title="Direct link to 场景5 S是黑色，S的左儿子是红色，S的右儿子是黑色，而N是它父亲的左儿子">​</a></h4>
<p><img decoding="async" loading="lazy" src="data:image/png;base64,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" width="247" height="133" class="img_ev3q"></p>
<p>我们对S做右旋操作，并交换S和S_L的颜色。现在N有了一个黑色兄弟，他的右儿子是红色的，所以我们进入了场景6。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="场景6-s是黑色s的右儿子是红色而n是它父亲的左儿子">场景6 S是黑色，S的右儿子是红色，而N是它父亲的左儿子<a href="#场景6-s是黑色s的右儿子是红色而n是它父亲的左儿子" class="hash-link" aria-label="Direct link to 场景6 S是黑色，S的右儿子是红色，而N是它父亲的左儿子" title="Direct link to 场景6 S是黑色，S的右儿子是红色，而N是它父亲的左儿子">​</a></h4>
<p><img decoding="async" loading="lazy" src="/assets/images/rbt_delete_case_4.6-9f0b683c8c6877f2dcf2168998e252a5.png" width="299" height="143" class="img_ev3q"></p>
<p>我们对P做左旋操作，然后交换P和S的颜色，并是S_R变成黑色。</p>
<p>但是，N现在增加了一个黑色祖先：要么N的父亲变成黑色，要么它是黑色而S被增加为一个黑色祖父。所以，通过N的路径都增加了一个黑色节点。</p>
<p>此时，如果一个路径不通过N，则有两种可能性：</p>
<ol>
<li>它通过N的新兄弟。那么它以前和现在都必定通过S和N的父亲，而它们只是交换了颜色。所以路径保持了同样数目的黑色节点。</li>
<li>它通过N的新叔父，S的右儿子。那么它以前通过S、S的父亲和S的右儿子，但是现在只通过S，它被假定为它以前的父亲的颜色，和S的右儿子，它被从红色改变为黑色。合成效果是这个路径通过了同样数目的黑色节点。</li>
</ol>
<p>在任何情况下，在这些路径上的黑色节点数目都没有改变。所以我们恢复了性质4。在示意图中的白色节点可以是红色或黑色，但是在变换前后都必须指定相同的颜色。</p>
<h1>参考资料</h1>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91" target="_blank" rel="noopener noreferrer">Wikipedia - 红黑树</a></li>
<li><a href="https://juejin.cn/post/6844903519632228365" target="_blank" rel="noopener noreferrer">掘金 - 漫画：什么是红黑树？ - 程序员小灰</a></li>
<li><a href="https://www.cnblogs.com/crazymakercircle/p/16320430.html" target="_blank" rel="noopener noreferrer">博客园 - 红黑树</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/algorithm">algorithm</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/bst">bst</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/avl">avl</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/rbt">rbt</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/algorithm/tree/bst.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/algorithm/tree/heap"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Heap</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/algorithm/tree/segment_tree"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Segment Tree</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#bst-二叉查找树" class="table-of-contents__link toc-highlight">BST 二叉查找树</a></li><li><a href="#avl-二叉平衡树" class="table-of-contents__link toc-highlight">AVL 二叉平衡树</a><ul><li><a href="#avl-子树失衡的调整" class="table-of-contents__link toc-highlight">AVL 子树失衡的调整</a></li><li><a href="#avl-节点删除" class="table-of-contents__link toc-highlight">AVL 节点删除</a></li></ul></li><li><a href="#rbt-红黑树" class="table-of-contents__link toc-highlight">RBT 红黑树</a><ul><li><a href="#失衡处理操作" class="table-of-contents__link toc-highlight">失衡处理操作</a><ul><li><a href="#变色" class="table-of-contents__link toc-highlight">变色</a></li><li><a href="#左旋右旋" class="table-of-contents__link toc-highlight">左旋/右旋</a></li></ul></li><li><a href="#节点插入场景分析" class="table-of-contents__link toc-highlight">节点插入场景分析</a><ul><li><a href="#场景1-空树无任何节点" class="table-of-contents__link toc-highlight">场景1 空树无任何节点</a></li><li><a href="#场景2-插入节点的父节点为黑色" class="table-of-contents__link toc-highlight">场景2 插入节点的父节点为黑色</a></li><li><a href="#场景3-插入节点的父节点为红色" class="table-of-contents__link toc-highlight">场景3 插入节点的父节点为红色</a></li><li><a href="#场景31-父亲和叔父节点都为红色" class="table-of-contents__link toc-highlight">场景3.1 父亲和叔父节点都为红色</a></li><li><a href="#场景32-父亲节点为红色叔父节点为黑色" class="table-of-contents__link toc-highlight">场景3.2 父亲节点为红色，叔父节点为黑色</a></li><li><a href="#场景321-父亲节点为红色叔父节点为黑色ll型失衡" class="table-of-contents__link toc-highlight">场景3.2.1 父亲节点为红色，叔父节点为黑色（LL型失衡）</a></li><li><a href="#场景322-父亲节点为红色叔父节点为黑色lr型失衡" class="table-of-contents__link toc-highlight">场景3.2.2 父亲节点为红色，叔父节点为黑色（LR型失衡）</a></li><li><a href="#场景323-父亲节点为红色叔父节点为黑色rr型失衡" class="table-of-contents__link toc-highlight">场景3.2.3 父亲节点为红色，叔父节点为黑色（RR型失衡）</a></li><li><a href="#场景324-父亲节点为红色叔父节点为黑色rl型失衡" class="table-of-contents__link toc-highlight">场景3.2.4 父亲节点为红色，叔父节点为黑色（RL型失衡）</a></li></ul></li><li><a href="#节点删除场景分析" class="table-of-contents__link toc-highlight">节点删除场景分析</a><ul><li><a href="#场景1-n成为新的根" class="table-of-contents__link toc-highlight">场景1 N成为新的根</a></li><li><a href="#场景2-s是红色节点" class="table-of-contents__link toc-highlight">场景2 S是红色节点</a></li><li><a href="#场景3-n的父亲s和s孩子节点都是黑色" class="table-of-contents__link toc-highlight">场景3 N的父亲、S和S孩子节点都是黑色</a></li><li><a href="#场景4-s和s孩子节点都是黑色但父节点是红色" class="table-of-contents__link toc-highlight">场景4 S和S孩子节点都是黑色，但父节点是红色</a></li><li><a href="#场景5-s是黑色s的左儿子是红色s的右儿子是黑色而n是它父亲的左儿子" class="table-of-contents__link toc-highlight">场景5 S是黑色，S的左儿子是红色，S的右儿子是黑色，而N是它父亲的左儿子</a></li><li><a href="#场景6-s是黑色s的右儿子是红色而n是它父亲的左儿子" class="table-of-contents__link toc-highlight">场景6 S是黑色，S的右儿子是红色，而N是它父亲的左儿子</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Notes</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/java">Java</a></li><li class="footer__item"><a class="footer__link-item" href="/ai">AI</a></li></ul></div><div class="col footer__col"><div class="footer__title">E-mail</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:vyckeyolyland@gmail.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Google E-mail<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:vyckey@qq.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">QQ E-mail<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/vyckey/vyckey-computer-notes" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Vyckey's Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>