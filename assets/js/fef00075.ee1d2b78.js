"use strict";(self.webpackChunkvyckey_computer_notes=self.webpackChunkvyckey_computer_notes||[]).push([[7770],{86665:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>t,metadata:()=>o,toc:()=>c});var a=r(74848),i=r(28453);const t={title:"Spring Configuration",tags:["java","spring","configuration"],sidebar_label:"Spring Configuration",sidebar_position:50},s="\u591a\u73af\u5883\u914d\u7f6e",o={id:"framework/spring/spring-framework/config",title:"Spring Configuration",description:"\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u5927\u591a\u5305\u62ec\u591a\u79cd\u73af\u5883\uff0c\u4f8b\u5982\u7ebf\u4e0a\u73af\u5883prod(product)\u3001\u5f00\u53d1\u73af\u5883dev(development)\u3001\u6d4b\u8bd5\u73af\u5883test\u3001\u5355\u5143\u6d4b\u8bd5unitest\u7b49\u7b49\u3002\u4e0d\u540c\u7684\u73af\u5883\u9700\u8981\u8fdb\u884c\u4e0d\u540c\u7684\u914d\u7f6e\uff0c\u6216\u8005\u6267\u884c\u4e0d\u540c\u7684\u903b\u8f91\u3002Spring Boot\u4e3a\u6b64\u63d0\u4f9b\u4e86\u975e\u5e38\u53cb\u597d\u7684\u652f\u6301\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece @Profile \u548c\u591a\u8d44\u6e90\u6587\u4ef6\u914d\u7f6e\u4e24\u4e2a\u65b9\u9762\u5f00\u59cb\u4ecb\u7ecd\u3002",source:"@site/java/framework/spring/spring-framework/config.md",sourceDirName:"framework/spring/spring-framework",slug:"/framework/spring/spring-framework/config",permalink:"/java/framework/spring/spring-framework/config",draft:!1,unlisted:!1,tags:[{label:"java",permalink:"/java/tags/java"},{label:"spring",permalink:"/java/tags/spring"},{label:"configuration",permalink:"/java/tags/configuration"}],version:"current",lastUpdatedBy:"vyckey",lastUpdatedAt:174745298e4,sidebarPosition:50,frontMatter:{title:"Spring Configuration",tags:["java","spring","configuration"],sidebar_label:"Spring Configuration",sidebar_position:50},sidebar:"tutorialSidebar",previous:{title:"Spring Web",permalink:"/java/framework/spring/spring-framework/web"},next:{title:"\u5faa\u73af\u4f9d\u8d56",permalink:"/java/framework/spring/spring-framework/advance"}},l={},c=[{value:"@Profile",id:"profile",level:2},{value:"\u591a\u8d44\u6e90\u914d\u7f6e",id:"\u591a\u8d44\u6e90\u914d\u7f6e",level:2},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"\u591a\u73af\u5883\u914d\u7f6e",children:"\u591a\u73af\u5883\u914d\u7f6e"}),"\n",(0,a.jsxs)(n.p,{children:["\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff0c\u5927\u591a\u5305\u62ec\u591a\u79cd\u73af\u5883\uff0c\u4f8b\u5982\u7ebf\u4e0a\u73af\u5883prod(product)\u3001\u5f00\u53d1\u73af\u5883dev(development)\u3001\u6d4b\u8bd5\u73af\u5883test\u3001\u5355\u5143\u6d4b\u8bd5unitest\u7b49\u7b49\u3002\u4e0d\u540c\u7684\u73af\u5883\u9700\u8981\u8fdb\u884c\u4e0d\u540c\u7684\u914d\u7f6e\uff0c\u6216\u8005\u6267\u884c\u4e0d\u540c\u7684\u903b\u8f91\u3002Spring Boot\u4e3a\u6b64\u63d0\u4f9b\u4e86\u975e\u5e38\u53cb\u597d\u7684\u652f\u6301\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece ",(0,a.jsx)(n.code,{children:"@Profile"})," \u548c\u591a\u8d44\u6e90\u6587\u4ef6\u914d\u7f6e\u4e24\u4e2a\u65b9\u9762\u5f00\u59cb\u4ecb\u7ecd\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"profile",children:"@Profile"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"@Profile"})," \u6ce8\u89e3\u4f7f\u7528\u5728\u7c7b\u548c\u65b9\u6cd5\u4e0a\uff0c\u5176 ",(0,a.jsx)(n.code,{children:"value"})," \u53c2\u6570\u7528\u4e8e\u6307\u5b9a\u53ef\u4ee5\u4f7f\u7528\u7684\u73af\u5883\u6709\u54ea\u4e9b\uff0c\u5982\u4e0b\u793a\u4f8b\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Configuration\npublic class DataSourceConfig {\n    @Bean\n    @Profile({"dev", "test"})\n    public DataSource devDataSource() {\n        ...\n    }\n\n    @Bean\n    @Profile("prod")\n    public DataSource prodDataSource() {\n        ...\n    }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u5bf9\u4e8e\u5b9e\u9645\u4f7f\u7528\u90a3\u4e2a\u73af\u5883\uff0c\u6709\u4ee5\u4e0b\u51e0\u79cd\u6fc0\u6d3b\u65b9\u5f0f\uff1a"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u914d\u7f6e\u5c5e\u6027\u6307\u5b9a\u3002\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"spring.profiles.active"})," \uff0c\u82e5\u672a\u914d\u7f6e\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"spring.profiles.default"})," \u3002"]}),"\n",(0,a.jsx)(n.li,{children:"\u5728web.xml\u4e2d\u914d\u7f6e\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<context-param>\n\t<param-name>spring.profiles.active</param-name>\n    <param-value>dev</param-value>\n</context-param>\n<servlet>\n    <servlet-name>zszxzServlet</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n        <init-param>\n            <param-name>spring.profiles.default</param-name>\n            <param-value>dev</param-value>\n        </init-param>\n    <load-on-startup>1</load-on-startup>\n</servlet>\n<servlet-mapping>\n    <servlet-name>zszxzServlet</servlet-name>\n    <url-pattern>/</url-pattern>\n</servlet-mapping>\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsxs)(n.li,{children:["\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"@ActiveProfiles"})," \u6ce8\u89e3\u3002"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = DataSourceConfig.class)\n@ActiveProfiles("dev")\npublic class ProfileTest {\n\n    @Autowired\n    private DataSource dataSource;\n\n    @Test\n    public void sheetTest(){\n        ...\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u591a\u8d44\u6e90\u914d\u7f6e",children:"\u591a\u8d44\u6e90\u914d\u7f6e"}),"\n",(0,a.jsx)(n.p,{children:"@Transactional"}),"\n",(0,a.jsx)(n.p,{children:"@Value"}),"\n",(0,a.jsx)(n.p,{children:"@ConfigurationProperties"}),"\n",(0,a.jsx)(n.p,{children:"@PropertySource"}),"\n",(0,a.jsx)(n.h2,{id:"\u53c2\u8003\u8d44\u6599",children:"\u53c2\u8003\u8d44\u6599"})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(p,{...e})}):p(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>o});var a=r(96540);const i={},t=a.createContext(i);function s(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);