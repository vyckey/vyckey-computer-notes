"use strict";(self.webpackChunkvyckey_computer_notes=self.webpackChunkvyckey_computer_notes||[]).push([[6120],{97728:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>j,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var a=t(74848),r=t(28453);const o={title:"Jackson Utils",tags:["java","jackson","json","xml"],sidebar_label:"JSON/XML Utils",sidebar_position:2},c="JSON \u5de5\u5177\u7c7b",s={id:"library/jackson/jackson_utils",title:"Jackson Utils",description:"JsonObjectMapper",source:"@site/java/library/jackson/jackson_utils.md",sourceDirName:"library/jackson",slug:"/library/jackson/jackson_utils",permalink:"/java/library/jackson/jackson_utils",draft:!1,unlisted:!1,tags:[{label:"java",permalink:"/java/tags/java"},{label:"jackson",permalink:"/java/tags/jackson"},{label:"json",permalink:"/java/tags/json"},{label:"xml",permalink:"/java/tags/xml"}],version:"current",lastUpdatedBy:"vyckey",lastUpdatedAt:1747456703e3,sidebarPosition:2,frontMatter:{title:"Jackson Utils",tags:["java","jackson","json","xml"],sidebar_label:"JSON/XML Utils",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Jackson",permalink:"/java/library/jackson/"},next:{title:"Annotation Examples",permalink:"/java/library/jackson/annotation_examples"}},l={},p=[{value:"JsonObjectMapper",id:"jsonobjectmapper",level:2},{value:"XmlUtils",id:"xmlutils",level:2}];function i(e){const n={code:"code",h1:"h1",h2:"h2",pre:"pre",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"json-\u5de5\u5177\u7c7b",children:"JSON \u5de5\u5177\u7c7b"}),"\n",(0,a.jsx)(n.h2,{id:"jsonobjectmapper",children:"JsonObjectMapper"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-groovy",children:"<dependency>\n    <groupId>com.fasterxml.jackson.core</groupId>\n    <artifactId>jackson-databind</artifactId>\n    <version>2.13.3</version>\n</dependency>\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'package xxx.utils;\n\nimport com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.JavaType;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.PropertyNamingStrategy;\nimport com.fasterxml.jackson.databind.type.TypeFactory;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.io.IOException;\nimport java.lang.reflect.Type;\n\n/**\n * {@link ObjectMapper} for JSON\n *\n * <p>example 1:</p>\n * <pre>{@code\n * @Data\n * class Person {\n *     private Integer myAge;\n *     private String myName;\n * }\n *\n * Person person = JsonObjectMapper.CAMEL_CASE.fromJson("{\\"myAge\\": 25, \\"myName\\":\\"Bob\\"}", Person.class);\n * String json = JsonObjectMapper.SNAKE_CASE.toJson(person);\n * Assert.assertEquals("{\\"my_age\\":25,\\"my_name\\":\\"Bob\\"}", json);\n * }</pre>\n *\n * <p>example 2:</p>\n * <pre>{@code\n * class MyJsonUtils {\n *     public static final JsonObjectMapper INSTANCE = new JsonObjectMapper(new ObjectMapper()\n *             // custom features for yourself\n *             .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n *     );\n * }\n * }</pre>\n *\n * @author vyckey\n */\npublic class JsonObjectMapper {\n    private static final Logger log = LoggerFactory.getLogger(JsonObjectMapper.class);\n    public static final JsonObjectMapper CAMEL_CASE = new JsonObjectMapper(new ObjectMapper()\n            .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n            .enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT)\n    );\n    public static final JsonObjectMapper SNAKE_CASE = new JsonObjectMapper(new ObjectMapper()\n            .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\n            .enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT)\n            .setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE)\n    );\n\n    private final ObjectMapper objectMapper;\n\n    public JsonObjectMapper(ObjectMapper objectMapper) {\n        this.objectMapper = objectMapper;\n    }\n\n    protected ObjectMapper getObjectMapper() {\n        return objectMapper;\n    }\n\n    protected void handleException(IOException e) {\n        log.error(e.getMessage(), e);\n    }\n\n    public String toJson(Object object) {\n        try {\n            return objectMapper.writeValueAsString(object);\n        } catch (IOException e) {\n            handleException(e);\n        }\n        return null;\n    }\n\n    public <T> T fromJson(String json, Class<T> valueType) {\n        try {\n            return objectMapper.readValue(json, valueType);\n        } catch (IOException e) {\n            handleException(e);\n        }\n        return null;\n    }\n\n    public <T> T fromJson(String json, TypeReference<T> valueTypeRef) {\n        try {\n            return objectMapper.readValue(json, valueTypeRef);\n        } catch (IOException e) {\n            handleException(e);\n        }\n        return null;\n    }\n\n    public <T> T fromJson(String json, JavaType valueType) {\n        try {\n            return objectMapper.readValue(json, valueType);\n        } catch (IOException e) {\n            handleException(e);\n        }\n        return null;\n    }\n\n    public <T> T fromJson(String json, Type type) {\n        try {\n            JavaType javaType = TypeFactory.defaultInstance().constructType(type);\n            return objectMapper.readValue(json, javaType);\n        } catch (IOException e) {\n            handleException(e);\n        }\n        return null;\n    }\n\n    public <T> T fromJson(byte[] json, Class<T> clazz) {\n        if (json == null) {\n            return null;\n        }\n        try {\n            return objectMapper.readValue(json, clazz);\n        } catch (IOException e) {\n            handleException(e);\n        }\n        return null;\n    }\n\n    public <T> T fromJson(byte[] json, TypeReference<T> type) {\n        if (json == null) {\n            return null;\n        }\n        try {\n            return objectMapper.readValue(json, type);\n        } catch (IOException e) {\n            handleException(e);\n        }\n        return null;\n    }\n\n    public <T> T convert(Object object, Class<T> clazz) {\n        return objectMapper.convertValue(object, clazz);\n    }\n\n    public <T> T convert(Object object, TypeReference<T> type) {\n        return objectMapper.convertValue(object, type);\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h1,{id:"xml-\u5de5\u5177\u7c7b",children:"XML \u5de5\u5177\u7c7b"}),"\n",(0,a.jsx)(n.h2,{id:"xmlutils",children:"XmlUtils"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-groovy",children:"<dependency>\n    <groupId>com.fasterxml.jackson.dataformat</groupId>\n    <artifactId>jackson-dataformat-xml</artifactId>\n    <version>2.11.1</version>\n</dependency>\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"package xxx.utils;\n\nimport com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\nimport lombok.extern.slf4j.Slf4j;\n\nimport java.io.IOException;\n\n/**\n * description is here\n *\n * @author vyckey\n */\n@Slf4j\npublic class XmlUtils {\n    private static final XmlMapper XML_MAPPER = new XmlMapper();\n\n    private XmlUtils() {\n    }\n\n    public static String toXml(Object object) {\n        try {\n            return XML_MAPPER.writeValueAsString(object);\n        } catch (IOException e) {\n            log.error(e.getMessage(), e);\n        }\n        return null;\n    }\n\n    public static <T> T fromXml(String xml, Class<T> valueType) {\n        try {\n            return XML_MAPPER.readValue(xml, valueType);\n        } catch (IOException e) {\n            log.error(e.getMessage(), e);\n        }\n        return null;\n    }\n\n    public static <T> T fromXml(String xml, TypeReference<T> valueTypeRef) {\n        try {\n            return XML_MAPPER.readValue(xml, valueTypeRef);\n        } catch (IOException e) {\n            log.error(e.getMessage(), e);\n        }\n        return null;\n    }\n}\n"})})]})}function j(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(i,{...e})}):i(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>s});var a=t(96540);const r={},o=a.createContext(r);function c(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);